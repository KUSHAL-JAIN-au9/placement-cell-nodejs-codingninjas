<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('_bootstrap_meta')%>
    <title>Home</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <style>
      .custom-bg {
        background: linear-gradient(
          to right,
          rgba(106, 17, 203, 1),
          rgba(37, 117, 252, 1)
        );
      }

      #myTable {
        color: white;

        background: linear-gradient(
          90deg,
          rgba(5, 2, 20, 1) 45%,
          rgba(9, 63, 121, 1) 87%
        );

        border-color: black;
      }
    </style>
  </head>

  <body class="custom-bg">
    <%- include('_header') %>
    <div class="w-75 mx-auto mt-5">
      <br />

      <div class="row">
        <div class="col-6">
          <h2 class="text-white">List of Students:</h2>
        </div>

        <div class="col-6 d-flex justify-content-end">
          <a
            href="/students/create"
            type="button"
            class="btn btn-success bg-success bg-gradient align-self-center mr-2"
          >
            <i class="bi bi-person-fill-add"></i> add</a
          >
          <a
            class="btn btn-dark bg-gradient align-self-center"
            href="/users/download-csv"
          >
            Download
            <i class="bi bi-file-earmark-arrow-down-fill"></i>
          </a>
        </div>
      </div>

      <% if(students.length > 0) {%>
      <div class="mt-3 mb-3 rounded">
        <table class="table table-dark table-striped rounded">
          <thead class="thead-dark text-white rounded">
            <tr>
              <th scope="col">Batch</th>
              <th scope="col">Name</th>
              <th scope="col">Email</th>
              <th scope="col">Contact</th>
              <th scope="col">DSA</th>
              <th scope="col">WEB</th>
              <th scope="col">REACT</th>
              <th scope="col">Interview</th>
              <th scope="col" class="text-end">Action</th>
            </tr>
          </thead>

          <tbody id="myTable">
            <% for(let student of students) {%>
            <tr>
              <th scope="row"><%=student.batch%></th>
              <td><%=student.name%></td>
              <td><%=student.email%></td>
              <td><%=student.contactNumber%></td>
              <td><%=student.dsa%></td>
              <td><%=student.webd%></td>
              <td><%=student.react%></td>
              <% if(student.interviews.length) {%>
              <td>
                <% for(let company of student.interviews){%>
                <%=company.company%> <%}%>
              </td>
              <%}else{%>
              <td>NONE</td>
              <%}%>
              <td
                style="
                  display: flex;
                  justify-content: space-around;
                  align-items: center;
                "
              >
                <a
                  href="/students/delete/<%=student.id%>"
                  type="button"
                  class="btn btn-danger bg-gradient btn-small"
                >
                  <i class="bi bi-trash3-fill"></i
                ></a>
              </td>
            </tr>
            <%}%>
          </tbody>
        </table>
      </div>
      <%}else{%>
      <div class="w-75 mx-auto mt-5">
        <h2>No Records Found</h2>
      </div>
      <%}%>
    </div>
    <%- include('_bootstrap_script')%>
  </body>
</html>
